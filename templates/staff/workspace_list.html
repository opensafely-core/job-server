{% extends "staff/base-tw.html" %}

{% load selected_filter %}

{% block metatitle %}Workspaces: Staff Area | OpenSAFELY Jobs{% endblock metatitle %}

{% block breadcrumbs %}
{% #breadcrumbs %}
  {% url "home" as home_url %}
  {% url "staff:index" as staff_url %}
  {% breadcrumb title="Home" url=home_url %}
  {% breadcrumb title="Staff area" url=staff_url %}
  {% breadcrumb title="Workspaces" active=True %}
{% /breadcrumbs %}
{% endblock breadcrumbs %}

{% block hero %}
<div class="bg-bn-ribbon-100 pt-6 pb-8">
  <div class="container">
    {% article_header title="Workspaces" %}
  </div>
</div>
{% endblock hero %}

{% block content %}
{% #card container=True %}
  <form method="GET" class="grid gap-2">
    {% if q %}
      {% var value=q|stringformat:"s" %}
    {% endif %}
    {% form_input custom_field=True type="search" id="workspaceSearch" name="q" value=value label="Search for a workspace" class="max-w-prose" %}
    {% #button type="submit" variant="primary" class="place-self-start" %}Search{% /button %}
  </form>
  {% if request.GET %}
    <p class="mt-3">
      {% url "staff:workspace-list" as staff_workspace_list_url %}
      {% link href=staff_workspace_list_url text="Clear search" %}
    </p>
  {% endif %}
{% /card %}

{% #card %}
  {% #list_group %}
    {% for workspace in workspace_list %}
      {% #list_group_item href=workspace.get_staff_url %}
        {{ workspace.name }}
      {% /list_group_item %}
    {% endfor %}
  {% /list_group %}
{% /card %}
{% endblock content %}
